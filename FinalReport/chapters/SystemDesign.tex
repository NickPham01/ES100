\section{System Overview}

Though it may appear trivial at first, the broad scope of the design space of this project meant making difficult design decisions where there was often no clear answer.  The first major decision was determining the approach used to reduce the swapping time.  Inspired by the battery connectors in some wearable devices, a hot swapping connector design was chosen.  Hot swapping refers to the ability to connect or disconnect a peripheral, in this case a guitar pedal, without needing to perform any special preparatory actions such as turning off the power.  This type of design unites a physical action of inserting or removing a pedal into a system with the electrical switching actions required to actually perform the hot swapping.

With this decision made, the high level design of the hot swapping device was considered.  To be able to insert a pedal into the signal chain at any time meant that the solution required a main signal control device, which acts as a "meta pedal", connected between the guitar and an amplifier.  When the hot swapping device is not activated, the guitar signal is connected directly to the amplifier.  When the hot swapping action occurs, the signal is routed through the hot swapping connector to the pedal and back, allowing the pedal to be inserted into the signal chain between the guitar and amplifier.

This required standardizing the interface between the guitar pedal and the device.  Data collected during a site visit to a Guitar Center retail location demonstrated the plethora of effects pedals available at a standard brick-and-mortar store.  These 150 pedals represent a good mix of products, from mass market production units such as the Boss DS-1 to high quality and expensive effects like Eventide’s H9. While the major manufacturers like Boss, MXR, and Electro Harmonix have narrowed their form factors down to a handful of types each, there is no standardization across producers on features important for this project, including the dimensions of the enclosure, the location and orientation of the signal and power jacks, the location of the screws used to hold the pedal’s bottom plates. Though most products use the de facto standard 9 VDC, center negative power supply connected with a 2.1 mm plug, this too has variations in some cases. All of these variations complicate standardizing a form that can easily be hot swapped.  A universal adapter was designed to connect the pedal to the hot swapping device.

On a high level, the design process focused on ease of use and intuition for the user over any other considerations where possible, which explains the preference for this tactile and tangible hot swapping method over a programmable switching device, for instance.  The push for simplicity has led to some increases in design complexity, including the need to automatically detect when a hot swapping event occurs rather than include a separate user controlled switch.

In order for a user to be able to test multiple effects, multiple hot swapping devices were included in the device.  An internal signal routing system was also designed to facilitate testing pedals in different routing configurations including series, parallel, feedback, and various combinations of these.  Finally, a user interface was designed to control this internal signal routing.

Because of the repetition present in the device, it was designed as a modular system to simplify design, fabrication, and evaluation.  Figures \ref{fig:system_block} and \ref{fig:module_block} show a hierarchical block diagram of the system.  The system level diagram shows three modules were used for the full implementation of the system, with only audio passing between them.  The same $24VDC$ power input was passed to each module.  The module level diagram shows the major constituent parts of each module.  The design and function of each of these will be discussed in the remainder of this chapter.

\insertimage{0.95}{FinalImages/SystemBlock_white.jpg}{System level of hierarchical block diagram.  This shows the modular design of the device.  The legend in the upper right shows that power is indicated in red, audio signal in black, and control signals in green, with the direction of the arrow indicating data direction.  Note that no control signals pass between the modules, making design and debugging simple.  The signal and power I/O for the device are passed on to the modules.}{fig:system_block}

\insertimage{0.95}{FinalImages/ModuleBlock_white.jpg}{Module level block diagram showing the contents of each module.  As in Figure \ref{fig:system_block}, power is indicated in red, audio signal in black, and control signals in green, with the direction of the arrow indicating data direction.  In principle, each module contains a pair of hot swap devices consisting of the hot swap connector, DPDT switching element, and adjustable voltage regulator.  The module also contains an internal signal routing mechanism consisting of two mixers and a user interface, as well as all necessary voltage regulators required to step down the 24V input for all these circuits.}{fig:module_block}

\section{Design Decisions}
	\subsection{Universal Adapter}
	\input{chapters/design/universaladaptor}

	\subsection{Hot Swapping Device}
	\input{chapters/design/hotswap}

	\subsection{Analog Signal Routing}
	\input{chapters/design/analogrouting}

	\subsection{Signal Routing User Interface}
	\input{chapters/design/ui}


